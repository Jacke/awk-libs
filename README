AWK library function descriptions

These libs are written for GNU awk 4.0 and newer



math.awk

  ceil(multiple, number)
    returns "number" rounded UP to the nearest multiple of "multiple"

  floor(multiple, number)
    returns "number" rounded DOWN to the nearest multiple of "multiple"

  round(multiple, number)
    returns "number" rounded to the nearest multiple of "multiple"

  change_base(number, start_base, end_base)
    converts "number" from "start_base" to "end_base"
    bases must be between 2 and 64. the digits greater than 9 are represented
    by the lowercase letters, the uppercase letters, @, and _, in that order.
    if ibase is less than or equal to 36, lowercase and uppercase letters may
    be used interchangeably to represent numbers between 10 and 35.
    returns 0 if any argument is invalid

  calc_pi()
    returns pi, with an accuracy of 10 decimal places

  calc_e()
    approximates e by calculating the sumation from k=0 to k=50 of 1/k!
    returns 10 decimal places



strings.awk

  shell_escape(string)
    returns the string escaped so that it can be used in a shell command

  ssub(ere, repl [, in])
    behaves like sub, except returns the result and doesn't modify "in"

  sgsub(ere, repl [, in])
    behaves like gsub, except returns the result and doesn't modify "in"

  lsub(str, repl [, in])
    substites the string "repl" in place of the first instance of "str" in the
    string "in" and returns the result. does not modify the original string. if
    "in" is not provided, uses $0

  glsub(str, repl [, in])
    behaves like lsub, except it replaces all occurances of "str"

  str_to_arr(string, array)
    converts string to an array, one char per element, 1-indexed
    returns the array length

  trim(string)
    returns "string" with leading and trailing whitespace trimmed

  rev(string)
    returns "string" backwards



csv.awk

  create_line(array, max [, sep [, qualifier] ])
    Generates an output line in quoted CSV format, from the contents of "array"
    "array" is expected to be an indexed array (1-indexed). "max" is the highest
    index to be used. "sep", if provided, is the field separator. If it is more
    than one character, the first character in the string is used. By default,
    it is a comma. "qualifier", if provided, is the quote character. Like "sep",
    it is one character. The default value is `"'. For example, the array:
    a[1]="foo"; a[2]="bar,quux"; a[3]="blah\"baz", when called with
    create_line(a, 3), will return: "foo","bar,quux","blah""baz".
    note: expects a non-sparse array. empty or unset values will become
    empty fields

  qsplit(string, array [, sep [, qualifier] ])
    a version of split() designed for CSV-like data. splits "string" on "sep"
    (,) if not provided, into array[1], array[2], ... array[n]. returns "n".
    both "sep" and "qualifier" will use the first character in the provided
    string. uses "qualifier" (" if not provided) and ignores "sep" within
    quoted fields. doubled qualifiers are considered escaped, and a single 
    qualifier character is used in its place.
    for example, foo,"bar,baz""blah",quux will be split as such:
    array[1] = "foo"; array[2] = "bar,baz\"blah"; array[3] = "quux";



times.awk

  month_to_num(month)
    converts human readable month to the decimal representation
    returns the number, -1 if the month doesn't exist

  day_to_num(day)
    converts human readable day to the decimal representation
    returns the number, -1 if the day doesn't exist

  hr_to_sec(timestamp)
    converts HH:MM:SS to seconds, returns -1 if invalid format

  sec_to_hr(seconds)
    converts seconds to HH:MM:SS

